# =============================================================================
# KMS-Connect – env.example
# Salin ke .env dan isi nilai. Jangan commit .env ke git.
# Untuk load .env di Django: pasang django-environ lalu Env.read_env() di settings.
# =============================================================================

# -----------------------------------------------------------------------------
# Django (wajib di production)
# -----------------------------------------------------------------------------
# Jika pakai Docker Compose: nilai yang mengandung $ harus di-escape jadi $$ (mis. $a8 -> $$a8$$).
SECRET_KEY=your-secret-key-min-50-chars-gunakan-ini-di-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1,.yourdomain.com

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Format: postgres://USER:PASSWORD@HOST:PORT/NAME
# Contoh lokal (tanpa Docker):
DATABASE_URL=postgres://postgres:password@localhost:5432/kmsconnect

# Docker: gunakan host "db" (nama service). Entrypoint akan set DATABASE_URL dari SQL_* jika belum set.
# DATABASE_URL=postgres://postgres:password@db:5432/kmsconnect

# Untuk Docker Compose – kredensial Postgres (service db)
SQL_DATABASE=kmsconnect
SQL_USER=postgres
SQL_PASSWORD=password

# Kosongkan atau hapus DATABASE_URL untuk pakai SQLite (dev saja).
# DATABASE_URL=

# -----------------------------------------------------------------------------
# CORS (asal frontend / mobile yang boleh akses API)
# Untuk HTTP-only cookie (web): credentials=true, daftar origin eksplisit wajib.
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# -----------------------------------------------------------------------------
# JWT HTTP-only cookie (web production)
# -----------------------------------------------------------------------------
# Nama cookie access & refresh (default: kms_access, kms_refresh)
# JWT_ACCESS_COOKIE_NAME=kms_access
# JWT_REFRESH_COOKIE_NAME=kms_refresh

# -----------------------------------------------------------------------------
# Frontend & email (verifikasi, reset password)
# -----------------------------------------------------------------------------
# URL frontend untuk tautan reset password (halaman /reset-password?uid=...&token=...)
FRONTEND_URL=http://localhost:3000
# URL logo absolut untuk email (kosong = tidak tampil). Contoh: https://api.domain.com/static/image/logo.jpg
# LOGO_URL=

# -----------------------------------------------------------------------------
# Google Login (verifikasi ID token – google-auth)
# -----------------------------------------------------------------------------
# Client ID dari Google Cloud Console (OAuth 2.0) – untuk cek audience ID token
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# -----------------------------------------------------------------------------
# Google Cloud Vision (OCR dokumen – KTP, ijasah, dll.)
# -----------------------------------------------------------------------------
# 1. Di Google Cloud Console: aktifkan "Cloud Vision API".
# 2. Buat Service Account (IAM & Admin > Service Accounts), beri role "Cloud Vision API User".
# 3. Buat kunci JSON, simpan file (jangan commit). Set path di bawah.
# Lokal: path absolut ke file JSON (mis. C:\path\to\vision-sa.json atau /path/to/vision-sa.json).
# Docker: mount file ke container dan set path di dalam container.
GOOGLE_APPLICATION_CREDENTIALS=
# Contoh: GOOGLE_APPLICATION_CREDENTIALS=/app/secrets/vision-sa.json

# -----------------------------------------------------------------------------
# SimpleJWT (opsional; default pakai SECRET_KEY)
# -----------------------------------------------------------------------------
# JWT_SIGNING_KEY=optional-jwt-signing-key-jika-bedakan-dari-SECRET_KEY

# -----------------------------------------------------------------------------
# Celery (background tasks: email, OCR, export, push)
# -----------------------------------------------------------------------------
# Broker & result backend: Redis. Docker: gunakan host "redis" (nama service).
# CELERY_BROKER_URL=redis://redis:6379/0
# Lokal (tanpa Docker):
CELERY_BROKER_URL=redis://localhost:6379/0
# Opsional: result backend terpisah (default = CELERY_BROKER_URL)
# CELERY_RESULT_BACKEND=redis://localhost:6379/1

# -----------------------------------------------------------------------------
# Email (Mailgun API – pakai API key, bukan SMTP)
# -----------------------------------------------------------------------------
# API key dari Mailgun: Sending > Domain settings > Sending API keys (domain)
# atau Account > API security > API keys (akun).
MAILGUN_API_KEY=your-mailgun-api-key
# Domain pengirim yang terverifikasi di Mailgun (mis. mg.yourdomain.com).
MAILGUN_SENDER_DOMAIN=mg.yourdomain.com
# Alamat pengirim default (harus @ domain yang terverifikasi).
DEFAULT_FROM_EMAIL=noreply@yourdomain.com
# Opsional: region EU – gunakan API EU
# MAILGUN_API_URL=https://api.eu.mailgun.net/v3

# -----------------------------------------------------------------------------
# Throttling (rate limiting – login, verify-email, reset password)
# -----------------------------------------------------------------------------
# DRF default: anon (unauthenticated), user (authenticated)
# DRF_THROTTLE_ANON=30/min
# DRF_THROTTLE_USER=120/min
# Auth endpoints (login, refresh): stricter per IP
# DRF_THROTTLE_AUTH=10/min
# Public auth (verify-email, confirm-reset-password): per IP
# DRF_THROTTLE_AUTH_PUBLIC=5/min

# -----------------------------------------------------------------------------
# Cache & document types (public list cache TTL)
# -----------------------------------------------------------------------------
# Cache uses Redis when CELERY_BROKER_URL starts with redis (DB 2).
# DOCUMENT_TYPES_CACHE_TIMEOUT=900

# -----------------------------------------------------------------------------
# Media / Static (opsional; production CDN atau path)
# -----------------------------------------------------------------------------
# MEDIA_URL=/media/
# STATIC_URL=/static/

# -----------------------------------------------------------------------------
# Media storage (profile photos, applicant documents)
# -----------------------------------------------------------------------------
# Local dev: leave DO_SPACES_* unset → media stored in MEDIA_ROOT (backend/media/).
# Production on DigitalOcean: set DO_SPACES_* → media stored in a Space (pip: django-storages[s3] boto3).
#
# --- DigitalOcean Spaces (production on DO only) ---
# Create a Space in DO Control Panel (same region as your Droplet, e.g. sgp1).
# Create Spaces key: API > Spaces Keys > Generate New Key.
# DO_SPACES_BUCKET_NAME=your-space-name
# DO_SPACES_REGION=sgp1
# DO_SPACES_ACCESS_KEY_ID=your-spaces-key
# DO_SPACES_SECRET_ACCESS_KEY=your-spaces-secret
# Optional: CDN domain (enable CDN on Space, then set)
# DO_SPACES_CDN_DOMAIN=your-space-name.sgp1.cdn.digitaloceanspaces.com
